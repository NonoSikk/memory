let arrayOfImages = [
  {
    src: "https://images.pexels.com/photos/271932/pexels-photo-271932.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "sleeping_fox",
  },
  {
    src: "https://images.pexels.com/photos/3075556/pexels-photo-3075556.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "squirrel",
  },
  {
    src: "https://images.pexels.com/photos/4681107/pexels-photo-4681107.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "husky",
  },
  {
    src: "https://images.pexels.com/photos/13765828/pexels-photo-13765828.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "otter",
  },
  {
    src: "https://images.pexels.com/photos/1525606/pexels-photo-1525606.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "seal",
  },
  {
    src: "https://images.pexels.com/photos/1564839/pexels-photo-1564839.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "owl",
  },
  {
    src: "https://images.pexels.com/photos/7390942/pexels-photo-7390942.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "beaver",
  },
  {
    src: "https://images.pexels.com/photos/2173872/pexels-photo-2173872.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "cat_net",
  },
  {
    src: "https://images.pexels.com/photos/866496/pexels-photo-866496.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "cat_grey",
  },
  {
    src: "https://images.pexels.com/photos/416160/pexels-photo-416160.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "cat_sleep",
  },
  {
    src: "https://images.pexels.com/photos/51340/rat-pets-eat-51340.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "eating_rat",
  },
  {
    src: "https://images.pexels.com/photos/4052861/pexels-photo-4052861.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "mouse",
  },
  {
    src: "https://cdn.pixabay.com/photo/2014/09/10/17/44/rat-440987_960_720.jpg",
    alt: "rat",
  },
  {
    src: "https://images.pexels.com/photos/12025705/pexels-photo-12025705.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "nutria",
  },
  {
    src: "https://images.pexels.com/photos/50577/hedgehog-animal-baby-cute-50577.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "hedgehog",
  },
  {
    src: "https://images.pexels.com/photos/1805164/pexels-photo-1805164.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "doggy",
  },

  {
    src: "https://images.pexels.com/photos/11870767/pexels-photo-11870767.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "otteer",
  },
  {
    src: "http://t0.gstatic.com/licensed-image?q=tbn:ANd9GcRvwWpbeu3Moa1Ub6fqv5RHe0oTMS6d1yZaMPixuZYRuyM0aCDONeGLF9m_9pZXchYLn4PuajIuU4XWjyTRjmA",
    alt: "sleepy_ferret",
  },
  {
    src: "https://images.pexels.com/photos/7179718/pexels-photo-7179718.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
    alt: "ferret",
  },
];
let cuteMode =
"https://images.pexels.com/photos/1526410/pexels-photo-1526410.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1";
let youSure = [
  "https://images.pexels.com/photos/3196887/pexels-photo-3196887.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
];

let arrayofHorror = [ 
  {
    src: "https://p1.pxfuel.com/preview/678/382/320/zombie-horror-undead-monster.jpg",
    alt: "bloddy-mouth",
  },
  {
    src: "https://p1.pxfuel.com/preview/883/770/343/fantasy-fog-creepy-mystical.jpg",
    alt: "dusk-creature",
  },
  {
    src: "https://p0.pxfuel.com/preview/470/342/475/scary-photo-manipulation-horror-creepy.jpg",
    alt: "dusk-stairs",
  },
  {
    src: "https://p1.pxfuel.com/preview/712/840/884/bomarzo-forest-monsters-viterbo.jpg",
    alt: "face-cave",
  },
  {
    src: "https://p1.pxfuel.com/preview/91/145/160/photoshop-manipulation-digital-art-night-dark.jpg",
    alt: "black-eyes",
  },
  {
    src: "https://p1.pxfuel.com/preview/585/158/417/horror-horror-doll-horror-girl-horror-clown-killer-clown-doll.jpg",
    alt: "bloody-doll",
  },
  {
    src: "https://p1.pxfuel.com/preview/465/265/207/halloween-horror-scary-creepy.jpg",
    alt: "pumkin-mask",
  },
  {
    src: "https://p0.pxfuel.com/preview/706/237/261/the-nun-film-horror-nun.jpg",
    alt: "weird-nun",
  },
  {
    src: "https://p1.pxfuel.com/preview/454/222/402/grim-reaper-horror-death-spooky.jpg",
    alt: "spooky-reaper",
  },
  {
    src: "https://p1.pxfuel.com/preview/541/1021/317/joker-joker-movie-movie-superhero-comics-character.jpg",
    alt: "the-joker",
  },
  {
    src: "https://p1.pxfuel.com/preview/420/535/698/people-halloween-people.jpg",
    alt: "zipper-mouth",
  },
  {
    src: "https://p1.pxfuel.com/preview/844/598/352/weird-frightening-halloween-fear-horror-clown.jpg",
    alt: "it",
  },
];

let horrorMode = 
"https://images.pexels.com/photos/673862/pexels-photo-673862.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1";

// array + dropbox → Thema aussuchen ob tiere oder grusel ,...
//anzahl der Spieler + punkte → "turn is over...its player x turn"
//array rng bilder + rng posi
// misch btn für nachm match
//chaos mode, misch btn nach jedem Zug eines spieler

// ==== Global Variables ====
const boardField = document.querySelector(".board");
const cardback = document.querySelector(".back");
const cardItem = document.querySelector(".card");
const cardfront = document.querySelector(".front");
const btnNewGame = document.querySelector("#reset");
let imgNameForDoubleCheck = "";
let last2Cards = [];
let playerMadeChoice = false;
// ==== End of: Global Variables ====

// ==== Start: Area for calling Functions ====
startNewGame()
// ==== Ende: Area for calling Functions ====

boardField.addEventListener("click", boardHandler);

function boardHandler(e) {
  if (playerMadeChoice === false) {
    playerMadeChoice = true;
    console.log(e);
    const cardBackSide = e.target.className;
    const imgElement = e.target.localName;
    const card = e.target.parentElement.classList;
    const cardFromImg = e.target.parentElement.parentElement.classList;

    if (cardBackSide === "back") {
      const imgName = e.target.nextElementSibling.children[0].alt;
      // Turn it to front AUFDECKEN
      card.toggle("turn");
      last2Cards.push(card);
      checkDoubles(imgName);
    }
  } else if (playerMadeChoice === true) {
    //For unlocking if player is intensiv "clicker"
    setTimeout(() => {
      playerMadeChoice = false;
    }, 1000);
  }
}

function checkDoubles(imgName) {
  if (imgNameForDoubleCheck === "") {
    //Check if this is first Card
    imgNameForDoubleCheck = imgName; //Yes, then save it for double check
    playerMadeChoice = false;
  } else if (imgName === imgNameForDoubleCheck) {
    //Card has a double, then clear Checkers
    imgNameForDoubleCheck = "";
    last2Cards = [];
    playerMadeChoice = false;
  } else {
    imgNameForDoubleCheck = "";
    turnCards();
  }
}
function turnCards() {
  // die letzten 2 Karten  lastClick.checked = false;
  last2Cards.forEach((card) => {
    setTimeout(() => {
      //Delayed action to show player its choice
      card.toggle("turn");
      playerMadeChoice = false;
    }, 1000);
    last2Cards = [];
  });
}

btnNewGame.addEventListener("click", startNewGame);

function startNewGame() {
  imgNameForDoubleCheck = "";
  last2Cards = [];
  playerMadeChoice = false; //refactoring needed ..
  content();
  const arr = Array.from(boardField.childNodes); //Turn fake Array into true Array
  const divArr = [];
  arr.filter((div) => {
    if (div.nodeName === "DIV") {
      div.classList.remove("turn");
      divArr.push(div);
    }
  });
  mixingCards(divArr);
}
function mixingCards(divArr) {
  //div 1-16 mixen
  const myArray = randomize(divArr);
  cleaningArrays(myArray);
}

function randomize(cardDeck) {
  // for schleife für shuffle
  // variable zum speichern der einzelnen Karte
  // rausholen einer zufälligen karte
  // einfügen der gespeicherten Karte im selben Array
  const maxRandomNumber = cardDeck.length;

  let myArray = cardDeck;

  for (let i = 0; i < maxRandomNumber; i++) {
    let switchOne = randomizeNumber(maxRandomNumber);
    let switchTwo = randomizeNumber(maxRandomNumber);

    [myArray[switchOne], myArray[switchTwo]] = [
      myArray[switchTwo],
      myArray[switchOne],
    ];
  }
  return myArray
}

function randomizeNumber(maxNumber) {
  return Math.floor(Math.random() * maxNumber);
}

function cleaningArrays(myArray) {
  boardField.textContent = "";
  for (let i = 0; i < myArray.length; i++) {
    boardField.append(myArray[i]);
  }
}


function content() {
  const cardImgArray = document.querySelectorAll("img");
  let arrayOfImageIndex = 0;
  console.log(randomize(arrayofHorror))

  for (let i = 0; i < cardImgArray.length; i++) {
    cardImgArray[i].setAttribute("src", arrayofHorror[arrayOfImageIndex].src);
    cardImgArray[i].setAttribute("alt", arrayofHorror[arrayOfImageIndex].alt);
    // Bei jedem geraden (zweiten) Wert erhöhe den Index um 1
    // Steuert die Karten Pärchen vergabe
    if( i % 2 ){
      arrayOfImageIndex++
    }  
  }
}
// btn ~ switch mode ~ css - 2classen  .. js - if class 1 nimm 2 vise versa .. check was es ist und nimm passendedn array 